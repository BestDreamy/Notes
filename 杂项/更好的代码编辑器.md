# 更好的代码编辑器

> vim、sublime、vscode使用感想

vim、emacs、sublime、vscode并不是天天写前端后端程序员的专用工具。实际上越来越多的电工（搞嵌入式的）从IAR、Keil、VS传承中走出来，转而使用这些轻量级的代码编辑器，硅农（码芯片的）更是天天和vim、emacs打交道，毕竟很多老插件不支持新代码编辑器。

笔者也算是一个用过很多代码编辑器的电工了，最近发现《Visual Studio Code权威指南》打折，直接买了一波。虽然说VSC有官方文档，这本书纯属浪费纸（迫真），个人感觉这本书的纪念意义大于实用意义——vim、emacs、sublime这些经典的代码编辑器都有自己的纸质使用指南，作为刚诞生数年的新代码编辑器，VSC能在短短时间内积累大量用户，并拥有一本属于自己的指南书，也证明了它的优秀。

什么让vscode这么优秀？易上手的操作、符合用户直觉的界面、开源生态......都是vsc发展的源泉。其中最重要的是什么呢？笔者认为VSCode的开源生态才是最关键的——emacs也是开源，但它诞生于RMS的天才；VSC不同，它源于开源社区的共同努力，这一点是区别于以往任何代码编辑器的最大特点

> 没错这里就是要吹爆VSC
>
> ~~微软拥抱开源，典中典地狱笑话了属于是~~
>
> 微软别的软件都挺恶心人，但VS一家能处（暴论）

## VSCode的基础框架

vscode的核心组件包括**Electron**、**Monaco Editor**、**TypeScript**、**LSP**、**DAP**、**Xterm.js**，还有基于web的**插件**体系（或者说微软的开源生态支持）

VSCode常被戏称为“在浏览器里面写代码”，事实上确实如此，不管是后端逻辑还是前端实现渲染，全都依赖着Web技术栈。这点有利有弊——优点是VSCode能够被搬到网页里，在物理机性能足够的情况下有高可移植性；但相对的，VSCode不像vim、emacs这些老代码编辑器那么轻量级——vim可以在嵌入式设备上跑甚至能带一大堆炫酷插件，而VSCode的原生ARM版本还有待完善（高情商），一个双核Cortex-A9可能（一定？）会卡死在VSCode上

在微软VS、GitHub的加持下，VSCode的插件数正在快速增长，并且越来越多的芯片公司将自己的SDK放到VSCode里面，微软目前还在尝试将嵌入式调试插件加入VSC，IAR等老牌嵌入式厂商也在推出vscode-like的编辑器和相关插件。

### Electron

> 如果说vim是最好的代码编辑器，那么emacs就是最好的操作系统，vscode是最好的浏览器

Electron原名Atom Shell，是GitHub开发的开源桌面应用程序框架。它基于HTML、CSS、JavaScript这些*Web前端*技术栈，以*Node.js*作为运行时，渲染引擎使用到*Chromium*。Atom、Twitch、Skype、WhatsApp等软件都基于Electron实现。

[框架官网](https://www.electronjs.org/)描述Electron的三大特性：Web、开源和跨平台，这个框架最大的特点是既可以开发桌面应用也可以将代码部署到网页，同时具有良好的跨平台特性

### Monaco Editor

Monaco是VSCode最核心的组件。这是一个基于*浏览器*的代码编辑器，支持语法高亮、代码验证、格式化、跳转、快捷键、文件比较等功能，只要有一个浏览器它就能跑。VSCode总负责人Gamma在加入微软之初的项目就是Monaco，它被广泛应用在微软的云产品、Edge和Office软件中。现在Gitee、Eclipse等公司的产品也都用上了Monaco作为在线编辑器。很多大学的oj平台、个人博客也都尝试性嵌入Monaco。一些芯片初创公司基于Monaco开发自己的SDK/IDE

### TypeScript

这是微软在2012年发布的一款开源编程语言，是JavaScript的超集，实现了元组、类型批注、推断和擦除、接口、枚举、泛型、命名空间等功能，“比JS更面向对象”。

VSCode中基于变量类型的智能提示、静态语法检查等功能就是TypeScript提供的

### LSP（Language Server Protocol）

语言服务器协议LSP是代码编辑器与语言服务器LS之间的一种协议，通过JSON-RPC传输消息，从而让各种不同的编辑器能方便嵌入各种编程语言。该协议最早是微软为VSCode开发的，2016年后随着微软推行LSP的标准化，现在LSP在vim、emacs、sublime等轻量级代码编辑器中也都很常见了。LS为代码编辑器提供了自动补全、定义跳转、代码格式化等与编程语言相关的功能

### DAP（Debug Adapter Protocol）

该协议基于JSON实现，用于开发工具和调试工具之间的通信。调试器提供了断点、变量查看和监控、多线程、堆栈调用、调试控制台等功能，而作为前端的代码编辑器界面需要一套能兼容不同语言调试器的协议，VSCode团队设计了一个被称为Debug Adapter的中间层来实现调试工具和前端之间的兼容，使用到的协议就是DAP

DAP和LSP都是为了编辑器和语言支持解耦实现的

### Xterm.js

VSCode的一个特色就是*集成终端*，可以在编辑器里面直接使用CMD、PowerShell、Bash、tmux、Cygwin等终端应用

这个功能就是基于Xterm.js开发的，它是一个使用TypeScript开发的前端组件，支持嵌入bash、vim、tmux等主流终端，支持GPU渲染和Unicode

需要注意：这是一个前端组件，通过与bash进程连接来实现终端模拟器的效果

## VSCode脚本

VSCode是非常容易上手的，基本操作和VS中一模一样，如果是习惯了vim、emacs、atom、sublime这些编辑器的用户还可以在插件中心安装对应快捷键的扩展或者直接在设置中选择对应快捷键映射，就能按照原有习惯使用VSC了。

这里主要谈一下VSC的脚本配置。VSCode使用json作为主要格式，在编写的时候会有一种在写前端的感觉（笑）

### settings.json





### Tasks.json





### launch.json









##  VSCode工程管理



### 多语言工程管理







### 插件管理









### Git与GitHub







## VSCode多语言支持







### C/C++







### Python







### Verilog
