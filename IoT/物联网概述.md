# 物联网

## 物联网的核心技术与产业分类

物联网核心技术有以下几种：

1. 传感器

2. 组网技术

   用于短距离和远程无线通讯，包括

   * 短距离：NFC、蓝牙、ZigBee、RFID等
   * 远距离：互联网、移动通信网络、NB-IoT、LoRa、卫星通信网络等

3. 嵌入式

4. 云计算

5. 边缘计算

物联网产业目前形成了用、云、边、管、端五大部分：

* 用户应用服务
  * 消费驱动应用：以消费市场为目标的应用产业、制造业
  * 政策驱动应用：以公共基础设施和政府相关项目为目标的制造业
  * 产业驱动应用：以传统工业、农业、物流、车辆制造为背景的物联网升级
* 云计算服务
  * PasS平台：以互联网厂商、通信服务商、新创业平台为主导的云平台服务产业
  * 云端通用服务：包括AI、大数据处理、网络信息安全等基于传统云服务转移而来的产业
* 边缘端产业
  * 边缘计算硬件载体厂商：传统硬件和芯片厂商主导的板卡生产产业
  * 边缘计算软件载体厂商：以传统硬件、软件厂商转移、分化而来的软件服务业
* 管理与授权IP型产业
  * 非授权频谱无线：提供WiFi、蓝牙、ZigBee等无IP授权需求的基带制造厂商
  * 授权频谱无线：提供某一特定IP协议栈接入的授权厂商
* 端计算服务
  * 芯片制造业：制造MCU、SoC、通信基带等芯片的制造业
  * 传感器制造业：制造传感器设备/芯片的制造业
  * 操作系统制造业：生产或高度定制操作系统（以RTOS和嵌入式Linux为主）的软件制造业
  * 周边设施制造业：生产屏幕、无线设备、PCB、电源等的传统制造业

## 物联网设备面临的挑战

1. 信息安全
2. 云计算可靠性
3. 协议授权
4. 碎片化
5. 能源问题

## 物联网基本结构

需要注意，物联网并不是简单的“连上网的嵌入式设备”，它的实现形式有很多——可以将数据当场采集、当场处理，再输出到云端，这就是“边缘计算”；也可以将数据采集后传输到多个计算设备，再将结果统一发送到云端或回传数据结果，这就是“分布式计算”；当场采集数据——传输到云端——云端计算——返回结构这样的体系架构仅仅是物联网的实现形式之一

### 物联网架构

1. USN架构

   即国际电信联盟ITU-T制定的泛在感应器体系结构

   将物联网设备分成

   * 传感器网络层

   * 泛在传感器网络接入层

     和传感器网络层合并成为**物联网感知层**，负责采集环境中的数据信息

   * 骨干网络层

     该层的实际应用为互联网，并很可能被下一代网络NGN取代

   * 网络中间件层

   * USN网络应用层

     和网络中间件层共同成为**应用层**，用于实现物联网的智能计算和管理

2. M2M架构

   这是USN的简化版本，由欧洲电信标准化协会M2M技术委员会给出

   将物联网设备分成

   * **应用层**

     由服务支撑平台等软件应用中间件和物联网具体应用软硬件构成

     主要解决计算、处理和决策问题，负责将网络层传输而来的数据分析处理后再以有效信息或具体运动的方式传输到应用端

     包括

     * 云计算
     * 边缘计算
     * 实时计算

     等诸多方向

   * **网络层**

     由网络管理中间件构成

     涉及互联网、移动通信网、无线传感器网络等多种无线数据传输关键技术，该层主要负责将感知层获取的信息安全可靠地传输到应用层

     常见的网络层实现有

     * 互联网：包括IPv4、IPv6等连接方式
     * 移动通信网：3G、4G、5G等移动通信方式
     * 无线传感器网络（WSN，Wireless Sensor Net）：在众多传感器之间建立一种无线自组网络，包括各种专用物联网协议

   * **感知层**

     由数据采集和组网技术组成，是物联网的基础

     应该包括如下结构：

     * 数据输入
     * 组网技术
     * 存储设备
     * 数据处理
     * 数据输出

   * **公共技术层**

     该层的技术包括标志识别、安全管理、QoS管理、网络管理等可以被同时应用在物联网技术框架其他三个层次的技术

### 嵌入式技术

要实现物联网，那就离不开嵌入式开发。嵌入式开发是一个很长的技术栈，涉及从底层电路、计算机原理到操作系统，从蓝牙、WiFi到TCP/IP等大量知识，概括来讲可以分成以下几种：

1. 单片机技术

   这里单片机开发指以汇编、寄存器、C/C++、库函数等为基础技术的裸机单片机开发，开发者需要掌握单片机基本开发技巧和基础的物联网组网技术

2. 嵌入式RTOS技术

   在对系统实时性很严格或性能限制的应用场景中处理多任务一般使用实时操作系统增加系统稳定性

   常见的RTOS有：

   FreeRTOS（4KB-9KB ROM）、RT-Thread（2.5KB ROM、1KB RAM）、uCOS（收费）、Keil RTX（专用于Cortex-M内核）等

3. 嵌入式Linux技术

   在对系统实时性要求相对较低且芯片性能较高的场景，嵌入式Linux具有快速部署、开发简单、复用性强的特点。并且嵌入式Linux具有多种发行版——从带图形界面的到只有串口调试的版本应有尽有，并且代码风格统一、易于修改、裁剪，所以当前有50%的项目选择Linux作为嵌入式操作系统

### 组网技术

物联网的另一个核心技术就是组网，常见的组网方法有以下几种：

1. 蓝牙

   由爱立信、诺基亚、东芝、IBM和英特尔在1998年5月联合发布，并经过多次升级迭代沿用至今

   蓝牙技术多用于终端和手机等移动设备之间组网，因为它存在以下缺点：

   * 功耗高：为了及时响应连接请求，在等待过程中必须使用轮询，导致耗能很高
   * 连接过程繁琐：由于蓝牙连接过程中涉及多次信息传递与验证，对设备计算资源是一种浪费
   * 安全性较弱：首次配对采用PIN码，一般仅由数字构成，位数很少，一般仅有4-6位；PIN码生成后设备会使用蓝牙自带E2或E3算法加密PIN码，再进行传输和身份验证，在此期间黑客可以通过拦截数据包、伪装目标蓝牙设备、暴力攻击等手段破解PIN码

   因此较少用于纯物联网设备

2. WiFi

   全称为Wireless Fidelity，在无线局域网的范畴指“无限相容性认证”，实质上是一种商业认证，同时也是一种无线联网的技术，其专利由澳大利亚政府享有，请不要在FSF支持者身边提及这个东西（笑）

   WiFi连接由AP（Access Point无线接入点）或称为“热点”（hotspot）的设备与Station（接入设备）组成，AP在媒体存取控制层MAC中作为无线工作站和有线局域网络的桥梁，接入设备通过连接到AP来接入有线网络

3. ZigBee

   也称为紫蜂，是一种短距离传输的无线网上协议，低速、低功耗、低成本、可靠、安全

   分成四层

   * 物理层

     作为ZigBee协议的底层，为上层提供数据接口等服务，由IEEE 802.15.4协议定义

   * MAC层

     负责不同设备之间无线数据链路的建立、维护、结束和确认的数据传送、接收功能，由IEEE 802.15.4协议定义

   * 网络/安全层

     保证数据传输和完整性，同时可选对数据加密，由ZigBee联盟定义

   * 应用/支持层

     根据设计目的和需求使多个元器件之间可以进行通信，由ZigBee联盟定义

   ZigBee最突出的优势就是低功耗和低成本，但是相应它的速率很低，只有250kb/s，不过完全能够传递传感器数据了

4. 3G/4G/5G

   主要用于设备上网，但一般需要使用SIM卡并向运营商付费

   用途专一

5. NB-IoT

   Narrow Band Internet of Things即“窄带物联网”，只需消耗180kHz的带宽即可部署于GSM网络或LTE网络，支持低功耗设备在广域网的蜂窝数据连接，因此也被称为低功耗广域网（LPWAN），支持待机时间长、对网络连接要求高的设备的高效连接

   主要缺点在于其通信速率较低

6. LoRa

   最大优势就是同功率下的穿透性能更好，无限传播距离更远，实现了低功耗和远距离的统一，城镇传输距离可达2-5km，郊区可达15km，且基于IEEE 802.15.4g标准

### TCP/IP与LwIP简介



